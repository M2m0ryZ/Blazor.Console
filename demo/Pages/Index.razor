@page "/"
@using Blazor.CommandLine
@using Blazor.Components.CommandLine

@inject IRunningCommand RunningCommand

<h1>Hello, world!</h1>

<BlazorCommandLine @ref="console" Name="Some Demo App v1.0.0"/>

@code
{
    BlazorCommandLine console;

    protected override Task OnAfterRenderAsync(bool firstRender)
    {
        console.Commands.Add(new CommandExample("simple","Description of command"));
        console.Commands.Add(new LongCommand("lng","Description of long-running command"));

        return base.OnAfterRenderAsync(firstRender);
    }

    public class CommandExample : BaseCommand
    {
        public CommandExample(string name,string description):base(name,description)
        {
            //base.AddOption(new string[]{"-d"},"Description","d");

            //base.AddArgument("columns","What is it");
        }

        public override string Execute(List<string> options)
        {
            return "This is output of a simple command";
        }
    }

    public class LongCommand : BaseCommand
    {
        public LongCommand(string name, string description):base(name,description,true)
        {
            
        }

        public override async Task<string> ExecuteAsync(List<string> options)
        {
            var i = 0;
            while (i < 10)
            {
                await Task.Delay(550);
                i++;
            }
            
            return "This was a long running command";
        }
    }
}